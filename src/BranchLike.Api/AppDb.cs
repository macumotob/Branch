using Microsoft.EntityFrameworkCore; using BranchLike.Api.Models; namespace BranchLike.Api; public class AppDb : DbContext { public DbSet<Link> Links => Set<Link>(); public DbSet<LinkClick> LinkClicks => Set<LinkClick>(); public AppDb(DbContextOptions<AppDb> options) : base(options) { } protected override void OnModelCreating(ModelBuilder modelBuilder) { modelBuilder.Entity<Link>(e => { e.ToTable("links"); e.HasKey(x => x.Id); e.HasIndex(x => x.ShortCode).IsUnique(); }); modelBuilder.Entity<LinkClick>(e => { e.ToTable("link_clicks"); e.HasKey(x => x.Id); e.HasIndex(x => x.LinkId); }); } }